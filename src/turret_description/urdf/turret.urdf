<?xml version="1.0"?>
<robot name="turret">

    <link name="base_link"/>
    <link name="pan_link"/>
    <link name="tilt_link"/>
    <link name="trigger_link"/>

    <joint name="pan_joint" type="revolute">
        <parent link="base_link"/>
        <child link="pan_link"/>
        <limit lower="0.0" upper="180.0" effort="0.0" velocity="0.0"/>
    </joint>

    <joint name="tilt_joint" type="revolute">
        <parent link="pan_link"/>
        <child link="tilt_link"/>
        <limit lower="90.0" upper="120.0" effort="0.0" velocity="0.0"/>
    </joint>

    <joint name="trigger_joint" type="prismatic">
        <parent link="tilt_link"/>
        <child link="trigger_link"/>
        <limit lower="0.0" upper="1.0" effort="0.0" velocity="0.0"/>
    </joint>

    <ros2_control name="turret_hardware_interface" type="system">
        <hardware>
            <plugin>turret_hardware/TurretSimHardwareInterface</plugin>
        </hardware>

        <joint name="pan_joint">
            <command_interface name="angle"/>
            <param name="gpio_pin">18</param>
        </joint>

        <joint name="tilt_joint">
            <command_interface name="angle"/>
            <param name="gpio_pin">0</param>
        </joint>

        <joint name="trigger_joint">
            <command_interface name="distance"/>
            <param name="gpio_pin">0</param>
        </joint>

        <gpio name="flywheel">
            <command_interface name="enabled"/>
            <param name="in1_gpio_pin">31</param>
            <param name="in2_gpio_pin">37</param>
        </gpio>
    </ros2_control>
</robot>
